[gd_scene load_steps=6 format=2]

[ext_resource path="res://Game/tileset/terrain_tileset.tres" type="TileSet" id=1]
[ext_resource path="res://Game/GameWorld.gd" type="Script" id=2]
[ext_resource path="res://Game/ui/TileView.tscn" type="PackedScene" id=3]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D
var dragging = false

func _ready():
	set_process_input(true)

func _input(event):
	if not get_node(\"../CanvasLayer/TileView\").visible:
		if event is InputEventMouseButton and Input.is_action_pressed(\"sub_click\"):
			if event.is_pressed():
				dragging = true
			else:
				dragging = false
		elif event is InputEventMouseMotion and dragging and Input.is_action_pressed(\"sub_click\"):
			position = get_global_mouse_position() - OS.get_window_size()/2
			print(position)
"

[sub_resource type="CircleShape2D" id=2]

[node name="World" type="Node2D"]
script = ExtResource( 2 )

[node name="Navigation2D" type="Navigation2D" parent="."]

[node name="TileMap" type="TileMap" parent="Navigation2D"]
tile_set = ExtResource( 1 )
cell_size = Vector2( 120, 104 )
cell_custom_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
cell_half_offset = 0
format = 1

[node name="KinematicBody2D" type="KinematicBody2D" parent="."]
script = SubResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="KinematicBody2D"]
shape = SubResource( 2 )

[node name="Camera2D" type="Camera2D" parent="KinematicBody2D/CollisionShape2D"]
anchor_mode = 0
current = true
smoothing_enabled = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="TileView" parent="CanvasLayer" instance=ExtResource( 3 )]
